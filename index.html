<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Networking Cheatsheet</title>

    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    
    <script src="/assets/js/app.js"></script>
</head>
    <body>
        <main class="container" role="main">
            <h1 class="title">Network Cheatsheet<div style="font-size: 15px; font-style: italic; color: var(--secondary); font-weight: 500; ">By IDIRI Anas</div></h1>
            

            <section id="menu">
                <div class="global-titles">
                    <i class="fa-solid fa-caret-right caret"></i> 
                    
                    <a>
                        <i class="fa-solid fa-terminal"></i> <span>Linux</span>
                    </a>
                </div>
                <div class="sub-titles none">
                    <ul>
                        <li><a href="#ip-ip-configuration">IP Configuration</a></li>                    
                        <li><a href="#ip-routing">Routing</a></li>
                    </ul>
                </div>


                <div class="global-titles">
                    <i class="fa-solid fa-caret-right caret"></i> 
                    <a>
                        <i class="fa-solid fa-network-wired"></i> <span>Cisco</span>
                    </a>
                </div>
                <div class="sub-titles none">
                    <ul>
                        <i class="fa-solid fa-diagram-project"></i> <span>COUCHE 3</span>
                        <ul>
                            <li><a href="#cisco-ip-configuration">IP Configuration</a></li>
                            <li><a href="#cisco-interfaces">Interfaces</a></li>
                            <li><a href="#cisco-routes">Routes</a></li>

                            <li class="sub-sub-title"><a href="#cisco-routing-protocols"><i class="fa-solid fa-network-wired"></i>ROUTING PROTOCOLS</a></li>
                            <ul>
                                <li><a href="#cisco-rip">RIP</a></li>
                                <li><a href="#cisco-ospf">OSPF</a></li>
                                <li><a href="#cisco-ospf-v6">OSPFv6</a></li>
                                <li><a href="#cisco-bgp">BGP</a></li>
                            </ul>
                        </ul>

                        <i class="fa-solid fa-plug"></i> <span>COUCHE 2</span>
                        <ul>
                            <li><a href="#cisco-vlan">VLAN</a></li>
                            <li><a href="#cisco-mac">MAC</a></li>
                            <li><a href="#cisco-stp">STP</a></li>
                            <li><a href="#cisco-acl">ACL</a></li>
                        </ul>

                        <i class="fa-solid fa-gears"></i> <span>AUTRES</span>
                        <ul>

                            <li><a href="#cisco-dhcp">DHCP</a></li>
                            <li><a href="#cisco-good-practices">Good practices</a></li>
                            <li><a href="#cisco-enable-ssh">Enable SSH</a></li>
                            <li><a href="#cisco-show">Show</a></li>    
                        </ul>

                    </ul>
                </div>


                <div class="global-titles">
                    <i class="fa-solid fa-caret-right caret"></i> 
                    <a href="#">
                        <i class="fa-solid fa-server"></i> <span>GNS3</span>
                    </a>
                </div>
                <div class="sub-titles none">
                    <ul>
                        <li><a href="#gns-ip-configuration">IP Configuration</a></li>
                    </ul>
                </div>


                <div class="global-titles">
                    <i class="fa-solid fa-caret-right caret"></i> 
                    <a href="#">
                        <i class="fa-solid fa-screwdriver-wrench"></i> <span>Tools</span>
                    </a>
                </div>
                <div class="sub-titles none">
                    <ul>
                        <li><a target="_blank" href="https://www.site24x7.com/fr/tools/ipv4-sous-reseau-calculatrice.html">Subnet calculator</a></li>
                    </ul>
                </div>
                
            </section>

            <section id="content">
                <section id="ip">
                    <h1 class="category-title"><i class="fa-solid fa-terminal"></i> <span>Linux</span></h1>
                    <div style="margin-top: 50px;">
                        <h2 id="ip-ip-configuration">IP Address</h2>
                        
                        <b>Up/Down an interface</b>
                        <pre>ip link set [INAME] up|down</pre>
                        
                        <b>Assign an ip address to an interface</b>
                        <pre>ip addr add [IP]/[MASK] dev [INAME]</pre>
                        
                        <span class="note">To unset an ip address, simply replace “add” by “delete”.</span>
                    </div>

                    <div>
                        <h2 id="cisco-interfaces">Interfaces</h2>
                        <pre>
interface [INAME]
    ! Passe en mode full duplex
    duplex full
    
    ! Set la vitesse en mbps (10/100/1000)
    speed 100

    ! detecte tout seul si c'est un cable droit ou croisé
    mdix auto</pre>
                    </div>

                    <div>
                        <h2 id="ip-routing">Routes</h2>
                        <b>Set a route</b>

                        <pre>ip route add [DST_NETWORK]/[DST_MASK] via [ROUTER_IP]</pre>

                        <b>Set the default gateway</b>

                        <pre>ip route add default via [GATEWAY_IP]</pre>
                        
                        <span class="note">To unset a route or the default gateway, simply replace “add” by “delete”.</span>
                    </div>

                </section>


                <section id="cisco">
                    <h1 class="category-title"><i class="fa-solid fa-network-wired"></i> <span>Cisco</span></h1>

                    <h1 class="category-sub-title"><i class="fa-solid fa-diagram-project"></i> <span>COUCHE 3</span></h1>

                    <div>
                        <h2 id="cisco-ip-configuration">Configuration</h2>
                        <b>Set an ip address</b>

                        <pre>interface [INAME]
ip add [IP_ADDRESS] [MASK]
! Configurer une IPv6 statique
ipv6 add [IPv6_ADDRESS]/[PREFIX]
! ex: ipv6 add 2a01:11::1/126
                            
! Configurer une IPv6 dynamique (EUI-64)
ipv6 add [IPv6_NETWORK]/[PREFIX] eui-64
! ex: ipv6 add 2a01:11::/126
ipv6 add autoconfig
</pre>
                        
                        <span class="note">To unset an ip address, simply add “no” before the “ip” command.</span>
                    </div>

                    <div>
                        <h2 id="cisco-routes">Routes</h2>
                        <b>Set a route</b>

                        <pre>ip route [DST_NETWORK] [DST_MASK] [NEXT_HOP]</pre>

                        <b>Set the default gw</b>

                        <pre>ip default-gateway [GATEWAY]</pre>
                        
                        <span class="note">To unset an route or the default gateway, simply add no before the ip command.</span>
                    </div>


                    <h3 class="category-sub-title"><i class="fa-solid fa-plug"></i> <span>Routing protocols</span></h3>
                    <div>
                        <h2 id="cisco-rip">RIP</h2>
                        <pre>router rip
    version 2</pre>
                        <b>Announce network</b>
                        <pre>network [NETWORK]</pre>

                        <b>Others</b>
                        <pre>
! Désactiver la récapitulation
no auto-summary

! Pas de rip
passive-interface [INAME]

! Redistribuer route par défaut
redistribute static

! Changer la distance administrative
distance [VALUE]</pre>

                    </div>
                    <div>
                        <h2 id="cisco-ospf">OSPF</h2>
                        <b>Configuration</b>

                        <pre>router ospf [PROCESS_ID] 
    network [IP_ADDRESS] [REVERSED_MASK] area [ZONE_OSPF]
</pre>
                        <span class="note">Après avoir changer ID de retour</span>
                        <br><br>
                        <b>Interact with interfaces</b>
                        <pre>
interface [INAME]
ip ospf cost [COST]
bandwith [BANDWITH_KBIT/S]</pre>

                        <b>Chemins multiples</b>
                        <pre>
maximum path 2
! Ip route cache bloque sur une interface pour accélerer le routage
no ip route cache</pre>
                        <h2 id="cisco-ospf-v6">OSPFv6</h2>
                        <b>Configuration</b>

                        <pre>ipv6 router ospf [PROCESS_ID] 
    router-id [UNIQUE_ID]
    ! ex: router id 1.1.1.1
</pre>
                        <br><br>
                        <b>Ajouter une interface à annoncer</b><br>
                        <span class="note">On n'annonce pas de "network" directement dans OSPF, on spécifie (au niveau des interface) qu'on veut qu'elles s'annoncent en tant que network connecté</span>
                        <pre>
interface [INAME]
    ipv6 ospf [PROCESS_ID] area 0

    ! On peut changer le cout en faisant
    ipv6 ospf cost [COST</pre>

    <div>
                        <h2 id="cisco-bgp">BGP</h2>
                        <b>Configuration</b>
                        <pre>router bgp [AS_NUMBER]
    ! Annoncer les réseaux auxquels nous sommes connecté
    network [IP_ADDRESS] mask [MASK] 

    ! Annonce nos voisins
    neighbor [IP_ADDRESS] remote-as [AS_OF_REMOTE_ROUTER]


    ! Annonce l'AS de la confederation (l'"AS parent")
    bgp confederation identifier [AS]
    
    ! Annonce les autres AS dans la confederation 
    bgp confederation peers [AS_X] [AS_X] [AS...]</pre>
                    </div>


                    <h1 class="category-sub-title"><i class="fa-solid fa-plug"></i> <span>COUCHE 2</span></h1>
                    <div>
                        <h2 id="cisco-vlan">VLAN</h2>
                        <b>Create a vlan</b>
                        <pre>
vlan [NUMBER]
    name [NAME_OF_THE_VLAN]</pre>
                        
                        <b>Put an interface in a vlan</b>
                        <pre>
interface [INAME]
    switchport mode access
    switchport access vlan [NUMBER]</pre>

                        <b>Trunk encapsulation dot1q</b>
                        <pre>
interface [INAME]
    switchport trunk encapsulation dot1q
    switchport mode trunk
    switchport trunk allowed vlan [VLAN_NUMBER1],[VLAN_NUMER2]</pre>

                    </div>

                    <div>
                        <h2 id="cisco-mac">MAC</h2>
                        <b>Change aging time</b>
                        <pre>mac address-table aging-time [VALUE (seconds)]</pre>
                        
                        <b>Create a static entry</b>
                        <pre>mac address-table static [MAC_ADDRESS xxxx.xxxx.xxxx] vlan 1 interface [INAME]</pre>
                        
                        <b>Clear the mac address table</b>
                        <pre>clear mac address-table dynamic</pre>
                    </div>

                    
                    <div>
                        <h2 id="cisco-stp">STP</h2>
                        <b>Change the priority</b>
                        <pre>spanning-tree vlan 1 priority [PRIORITY]</pre>

                        <b>Change duration of ...</b>
                        <pre>
! Durée de Listening -> Learning & Learning -> Forwarding
spanning-tree vlan 1 forward-time [DURATION: 15]
! Récurrence d'envoi des trames
spanning-tree vlan 1 hello-time [DURATION: 2] 
! Durée après laquelle recalculer si aucun BPDU reçu
spanning-tree vlan 1 max-age [DURATION: 20]
                        </pre>

                        <b>Disable STP</b>
                        <pre>
interface [INAME]
    spanning-tree portfast</pre>

                        <b>Update the port</b>
                        <pre>
interface [INAME]
    no negotiation auto
    speed 100</pre>
                        
                        <b>Clear the mac address table</b>
                        <pre>clear mac address-table dynamic</pre>
                    </div>

                    <div>
                        <h2 id="cisco-acl">ACL</h2>
                        <b>Create a standard ACL</b>
                        <pre>
! Interdit le trafic provenant de .4
access-list [ACL_ID] deny host 192.168.1.4
! Autorise tout le reste
access-list [ACL_ID] permit any</pre>

                        <b>Create an extended ACL</b>
                        <pre>
! Filtre ICMP pour 192.168.1./24 quand dst => .23
access-list [ACL_ID] deny icmp 192.168.1.0 255.255.255.0 host 192.168.1.23

! Interdire accès au port 21
access-list [ACL_ID] deny tcp any host 192.168.1.23 eq 21

! Autorise le reste
access-list [ACL_ID] permit ip any any</pre>

                        <span class="note">
                            ACL Standard: (0-100) Critère seulement sur l'@ip source<br>
                            ACL Extended: (100-) Critère sur @ip_src, @ip_dst, port_src, port_dst, service
                        </span><br><br>
                        
                        <b>Enable ACL on interface</b>
                        <pre>
interface [INAME]
ip access-group [ACL_ID] in</pre>
                    </div>


                    <h1 class="category-sub-title"><i class="fa-solid fa-gears"></i> <span>AUTRES</span></h1>
                    
                    <div>
                        <h2 id="cisco-dhcp">DHCP</h2>
                        <b>Enable DHCP on a router</b>
                        <pre>
! On précise les adresses à exclure (par ex celle du routeur etc)
ip dhcp excluded-address x.x.x.x

! On créé le pool DHCP
ip dhcp pool [NAME]
network [NETWORK] [MASK]
default-router [GATEWAY]</pre>
                    </div>

                    <div>
                        <h2 id="cisco-good-practices">Good practices</h2>
                        <b>General things to do</b>
                        <pre>
! Activer le routate ipv6
ipv6 unicast-routing
                            
! Chiffrement des mots de passes locaux cisco
service password-encryption

! Forcer une taille minimale pour les mots de passes
security passwords min-length 8

! Bloquer pendant deux minutes si trois fails en une minutes
login block-for 120 attempts 3 within 60

! Mettre un mot de passe pour le enable
enable secret MY_SECURE_PASSWORD

! Désactiver attente DNS
no ip domain-lookup                 

! Afficher les autres appareiles cisco joignable
show cdp neigh
                            
! Mettre un mot de passe ou terminaux virtuel
line vty 0 4 
password MY_SECURE_PASSWORD
exec-timeout 5 30 </pre>
                        
                    </div>


                    <div>
                        <h2 id="cisco-enable-ssh">Enable SSH</h2>
                        <b>Enable SSH on a router or a switch</b>
                        <pre>
configure terminal
hostname [HOSTNAME]

! IF YOU ARE CONFIGURING A SWITCH
interface vlan1
ip address [IP]/[MASK]
ip default-gateway [GATEWAY]
interface vlan1
no sh
! ENDIF

username [USERNAME] secret [PASSWORD]
enable secret [PASSWORD]

ip domain name [DOMAIN]
crypto key generate rsa general-keys modulus 1024

line vty 0 [YOUR NUMBER OF VTYS]
transport input ssh
login local</pre>
                        
                    </div>


                    <div>
                        <h2 id="cisco-show">Show</h2>
                        <b>Show version, ram etc</b>
                        <pre>show version</pre>
                        
                        <b>Show brief information about interfaces</b>
                        <pre>show ip int brief</pre>

                        <b>Show VLANs</b>
                        <pre>sh vlan</pre>

                        <b>Mac address table</b>
                        <pre>sh mac address-table</pre>

                        <b>Spanning tree</b>
                        <pre>show spanning-tree &lt;summary&gt;</pre>
                        <pre>show spanning-tree vlan 1</pre>

                        <b>Routing</b>
                        <pre>show ip protocols</pre>
                        <pre>show ip route</pre>

                        <b>OSPF</b>
                        <pre>show ip ospf </pre>
                        <pre>show ip ospf data</pre>
                        <pre>show ip ospf interface [INAME]</pre>
                        
                        <b>"Grep"-like tricks</b>
                        <pre>show interface | include up|down</pre>
                        <pre>show interface | include up&down</pre>

                    </div>
                </section>
            </section>

            <section id="GNS">
                <h1 class="category-title"><i class="fa-solid fa-server"></i> <span>GNS 3</span></h1>
                
                <div style="margin-top: 50px;">
                    <h2 id="gns-ip-configuration">IP Configuration</h2>
                    
                    <b>Display IP</b>
                    <pre>show ip all</pre>
                    
                    <b>Assign an ip address</b>
                    <pre>ip [IP] [MASK] [GATEWAY] </pre>
                    
                    <b>Save the config</b>
                    <pre>save</pre>
                </div>

            </section>
        </main>  
        
        <div id="back-to-top"><i class="fa-solid fa-arrow-up"></i></div>
    </body>
</html>
